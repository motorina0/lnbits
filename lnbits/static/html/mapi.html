<!DOCTYPE html>
<html>

<head>
  <script src="https://mempool.space/mempool.js"></script>
  <!-- 
  <script src="https://lnbits.link/static/vendor/axios@0.20.0/axios.min.js"></script>
  <script src="https://lnbits.link/static/js/api.js"></script>
  <script src="https://lnbits.link/watchonly/static/js/api.js"></script> -->

  <script src="http://localhost:8000/static/vendor/axios@0.20.0/axios.min.js"></script>
  <script src="http://localhost:8000/static/js/api.js"></script>
  <script src="http://localhost:8000/watchonly/static/js/api.js"></script>


  <script>
    async function test() {
      // const wallet = { inkey: '318664f5034549cc8b6191116e1a2091' } // lnbits.link
      // const wallet = { inkey: 'ae767cde5cb147d0bc42d4bc5c326e1a' }
      // const wallet = { inkey: '56f0cadae94541c893aee82f7506da02' }

      const wallet = { inkey: '2db48e4634d14ceba143d76ba52247bf' } // lnbits legend 
      const hostname = 'legend.lnbits.com'
      
      const  api  = lnbitsApiJS()
      console.log('### api.hostname 1:', api.hostname)
      api.hostname = hostname
      const resp = await api.createInvoice(wallet, 125, 'money api')
      console.log('### api.hostname 1:', api.hostname)
      console.log('### invoice', resp.data)

      const w = await api.getWallet(wallet)
      console.log('### w', w)

      const watchonlyApi = watchonlyApiJS({hostname: 'lnbits.link'})
      watchonlyApi.hostname = 'legend.lnbits.com'
      const resp2 = await watchonlyApi.getAccounts(wallet)
      console.log('### accounts', resp2.data)
    }
    test()
  </script>

  <script>
    const init = async () => {

      const { bitcoin: { difficulty } } = mempoolJS({
        hostname: 'mempool.space'
      });

      const difficultyAdjustment = await difficulty.getDifficultyAdjustment();

      document.getElementById("result").textContent = JSON.stringify(difficultyAdjustment, undefined, 2);

    };
    init();
  </script>
</head>

<body>
  <pre id="result"></pre>
</body>

</html>